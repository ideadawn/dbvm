-- Deploy test:v1.6.0 to mysql


-- Create Table
CREATE TABLE IF NOT EXISTS `test` (
	`id` INT(10) NOT NULL AUTO_INCREMENT COMMENT '自增ID',
	PRIMARY KEY (`id`) USING BTREE
) COMMENT='测试' COLLATE='utf8mb4_bin' ENGINE=InnoDB;

-- Multi Sql Blocks
-- NO-TRANS
-- IGNORE 1060
BEGIN;
ALTER TABLE `test`
	ADD COLUMN `phone` VARCHAR(20) NOT NULL DEFAULT '' COLLATE 'ascii_bin' COMMENT '手机号',
	ADD COLUMN `nickname` VARCHAR(32) NOT NULL DEFAULT '' COLLATE 'utf8mb4_bin' COMMENT '昵称',
	DROP COLUMN `not_exists`,
	ADD INDEX `phone` (`phone`),
	ADD PRIMARY KEY (`id`);

ALTER TABLE `test`
	MODIFY COLUMN `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '自增ID',
	CHANGE COLUMN `phone` `phone` VARCHAR(20) NOT NULL DEFAULT '' COLLATE 'ascii_bin' COMMENT '手机号';
COMMIT;

-- Procedure
DELIMITER //

CREATE DEFINER=`root`@`localhost` PROCEDURE `delete_test`(
	IN `id` INTEGER
)
LANGUAGE SQL
NOT DETERMINISTIC
CONTAINS SQL
SQL SECURITY DEFINER
COMMENT ''
BEGIN
  DELETE FROM `test` WHERE `id` = id;
END//

DELIMITER ;
